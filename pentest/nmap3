#!/bin/bash
# like nmap2 but with an extra rustscan at the start
set -e
rustscan -a "$1" -- -sCV -oA init
sudo nmap "$1" -p- -sS -Pn -oA tcp_ports -vv
ports="$(grep '/tcp' tcp_ports.nmap | cut -d/ -f1 | tr '\n' ',')"
nmap "$1" -p "$ports" -sCV -Pn -oA tcp_script
notify-send "nmap $1 done"
